
(function($){$(function(){$(".add-quote-parent").on('click',function(e){e.preventDefault();$(".add-quote__dropdown").toggle();});});})(jQuery);;
(function($){$(document).on('eventAfterRate',function(event,data){var widgetSelector='.rate-'+data.content_type+'-'+data.content_id+'-'+data.widget_id+'-'+data.widget_mode;var canvas=$('canvas.rating__value__circle',widgetSelector);if(canvas.length>0){citatyRate(canvas[0]);}});function citatyRate(canvas){var context=canvas.getContext('2d');context.clearRect(0,0,canvas.width,canvas.height);context.lineWidth=2;var x=canvas.width/2;var y=canvas.height/2;var radius=14;var lengthAngleGreen;var lengthAngleRed;var percentageGreen=canvas.getAttribute('data-percent')/100;if(percentageGreen>0){if(percentageGreen<1){lengthAngleGreen=percentageGreen*330.0;}
else{lengthAngleGreen=percentageGreen*360.0;}
var startAngleGreen=angle(0-lengthAngleGreen/2);var endAngleGreen=angle(lengthAngleGreen/2);context.strokeStyle='#7ac63c';context.lineCap='round';context.beginPath();context.arc(x,y,radius,startAngleGreen,endAngleGreen,false);context.stroke();}
if(percentageGreen>=1){return;}
var percentageRed=1-percentageGreen;if(percentageRed<1){lengthAngleRed=percentageRed*330.0;}
else{lengthAngleRed=percentageRed*360.0;}
var startAngleRed=angle(180-lengthAngleRed/2);var endAngleRed=angle(180+lengthAngleRed/2);if($(canvas).parent().hasClass("rating__value-neutral")){context.strokeStyle='#dfdfdf';}
else{context.strokeStyle='#ff2919';}
context.beginPath();context.arc(x,y,radius,startAngleRed,endAngleRed,false);context.stroke();}
function angle(degrees){var angle=degrees*(Math.PI/180);return angle;}
var citatyRateValuesShow=function(){$(this).siblings('.rating__control').children('.rating__button').hide();$(this).siblings('.rating__control').children('.rating__result').show();}
var citatyRateValuesHide=function(){$(this).siblings('.rating__control').children('.rating__result').hide();$(this).siblings('.rating__control').children('.rating__button').show();}
var citatyRateValuesToggle=function(){$(this).siblings('.rating__control').children('.rating__button').toggle();$(this).siblings('.rating__control').children('.rating__result').toggle();}
Drupal.behaviors.CitatyRate={attach:function(context,settings){$('.node',context).once('rating-canvas',function(){$('canvas.rating__value__circle',this).each(function(index,canvas){citatyRate(canvas);});$('.rating__value:not(.rating__value-neutral)',this).mouseover(citatyRateValuesShow);$('.rating__value:not(.rating__value-neutral)',this).mouseout(citatyRateValuesHide);$('.rating__value:not(.rating__value-neutral)',this).click(citatyRateValuesToggle);});}}})(jQuery);
(function($){$(function(){if(window.innerWidth<768){return;}
$("body").append("<div id='scroll-to-top'></div>");var btn=$('#scroll-to-top'),scrolling=false;$(window).scroll(function(){if(!scrolling){scrolling=true;setTimeout(function(){if(window.scrollY>600){btn.fadeIn().css('position','fixed');}else{btn.fadeOut();}
scrolling=false;},300);}});btn.click(function(e){e.preventDefault();$('body, html').animate({scrollTop:0},500);return false;});});})(jQuery);;
(function($){$(document).on('click',function(e){var $shareDropdown=$('.share-dropdown');var $target=$(e.target);if($shareDropdown.length&&!$target.hasClass('action_share')&&!$target.parent().hasClass('action_share')&&!$(e.target,'.share-dropdown').length){$shareDropdown.hide();}});var getNid=function(id){var re=/node-([0-9]+)$/;var match=re.exec(id);if(match){return match[1];}
return false;};Drupal.behaviors.citatyShare={attach:function(context){$('article',context).once('shareLink',function(){$('.action_share',this).click(function(e){e.preventDefault();var parent=$(this).parent();var shareDropdown=$('.share-dropdown',parent);if(shareDropdown.length>0){shareDropdown.toggle();}
else{dropdownDisplay(this);}});});function dropdownDisplay(shareLink){var maxLength=138-22;var id=$(shareLink).closest('article').attr('id');var nid=getNid(id);var shareUrl='http://citaty.info/node/'+nid;var text=$("#"+id+" .field-name-body .field-item p").text();if(text.length>maxLength){text=$.trim(text).substring(0,maxLength).split(" ").slice(0,-1).join(" ")+"â€¦";}
text=encodeURIComponent(text);var dropdown='<div class="share-dropdown"><div class="dropdown__body">';dropdown+='          <div class="shares">';dropdown+='              <div class="shares__title">'+Drupal.t('Share with friends:')+'</div>';dropdown+='              <ul class="shares__list">';dropdown+='  <li class="shares__list__item">';dropdown+='      <a class="share" target="_blank" href="http://vk.com/share.php?url='+shareUrl+'">';dropdown+='          <div class="share__icon">';dropdown+='              <div class="social social_vkontakte"></div>';dropdown+='          </div>';dropdown+=Drupal.t('Vkontakte');dropdown+='      </a>';dropdown+='  </li>';dropdown+='  <li class="shares__list__item">';dropdown+='      <a class="share" target="_blank" href="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl='+shareUrl+'&st.comments='+text+'">';dropdown+='          <div class="share__icon">';dropdown+='              <div class="social social_odnoklassniki">';dropdown+='  <i class="social__icon"></i>';dropdown+='              </div>';dropdown+='          </div>';dropdown+=Drupal.t('Odnoklassniki');dropdown+='      </a>';dropdown+='  </li>';dropdown+='  <li class="shares__list__item">';dropdown+='      <a class="share" target="_blank" href="http://www.facebook.com/sharer.php?u='+shareUrl+'">';dropdown+='          <div class="share__icon">';dropdown+='              <div class="social social_facebook">';dropdown+='  <i class="social__icon"></i>';dropdown+='              </div>';dropdown+='          </div>';dropdown+='Facebook';dropdown+='      </a>';dropdown+='  </li>';dropdown+='  <li class="shares__list__item">';dropdown+='      <a class="share" target="_blank" href="https://twitter.com/intent/tweet?url='+shareUrl+'&text='+text+'">';dropdown+='          <div class="share__icon">';dropdown+='              <div class="social social_twitter">';dropdown+='  <i class="social__icon"></i>';dropdown+='              </div>';dropdown+='          </div>';dropdown+='Twitter';dropdown+='      </a>';dropdown+='  </li>';dropdown+='              </ul>';dropdown+='          </div>';dropdown+='      </div></div>';$(shareLink).after(dropdown);$('.share',context).click(function(e){e.preventDefault();window.open($(this).attr("href"),'displayWindow','width=500, height=400, left=200, top=100, location=no, directories=no, status=no, toolbar=no, menubar=no');$(this).parents('.share-dropdown').hide();});}}};})(jQuery);
(function($){Drupal.behaviors.CitatyAlters={attach:function(context,settings){$('input.form-autocomplete',context).once('citaty-autocomplete-enter').keypress(function(e){if(e.keyCode===13&&this!==undefined){e.preventDefault();}});}}})(jQuery);